"use strict";(self.webpackChunkephemeris_notes=self.webpackChunkephemeris_notes||[]).push([[2933],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>k});var i=a(7294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,i,n=function(e,t){if(null==e)return{};var a,i,n={},l=Object.keys(e);for(i=0;i<l.length;i++)a=l[i],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(i=0;i<l.length;i++)a=l[i],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var o=i.createContext({}),m=function(e){var t=i.useContext(o),a=t;return e&&(a="function"==typeof e?e(t):r(r({},t),e)),a},p=function(e){var t=m(e.components);return i.createElement(o.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},d=i.forwardRef((function(e,t){var a=e.components,n=e.mdxType,l=e.originalType,o=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=m(a),k=n,c=d["".concat(o,".").concat(k)]||d[k]||u[k]||l;return a?i.createElement(c,r(r({ref:t},p),{},{components:a})):i.createElement(c,r({ref:t},p))}));function k(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var l=a.length,r=new Array(l);r[0]=d;var s={};for(var o in t)hasOwnProperty.call(t,o)&&(s[o]=t[o]);s.originalType=e,s.mdxType="string"==typeof e?e:n,r[1]=s;for(var m=2;m<l;m++)r[m]=a[m];return i.createElement.apply(null,r)}return i.createElement.apply(null,a)}d.displayName="MDXCreateElement"},9554:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>o,contentTitle:()=>r,default:()=>u,frontMatter:()=>l,metadata:()=>s,toc:()=>m});var i=a(7462),n=(a(7294),a(3905));const l={tags:["devlog"],sidebar_position:1},r=void 0,s={unversionedId:"ImplementationDetails/devlog/2026/January",id:"ImplementationDetails/devlog/2026/January",title:"January",description:"Monday 5th",source:"@site/docs/ImplementationDetails/devlog/2026/January.md",sourceDirName:"ImplementationDetails/devlog/2026",slug:"/ImplementationDetails/devlog/2026/January",permalink:"/EphemerisNotes/ImplementationDetails/devlog/2026/January",draft:!1,editUrl:"https://github.com/martindevans/EphemerisNotes/tree/master/docs/ImplementationDetails/devlog/2026/January.md",tags:[{label:"devlog",permalink:"/EphemerisNotes/tags/devlog"}],version:"current",sidebarPosition:1,frontMatter:{tags:["devlog"],sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"December",permalink:"/EphemerisNotes/ImplementationDetails/devlog/2025/December"},next:{title:"Media",permalink:"/EphemerisNotes/category/media"}},o={},m=[{value:"Monday 5th",id:"monday-5th",level:2},{value:"Tuesday 6th",id:"tuesday-6th",level:2},{value:"Wednesday 7th",id:"wednesday-7th",level:2},{value:"Thursday 8th",id:"thursday-8th",level:2},{value:"Monday 12th",id:"monday-12th",level:2},{value:"Tuesday 13th",id:"tuesday-13th",level:2},{value:"Wednesday 14th",id:"wednesday-14th",level:2},{value:"Thursday 15th",id:"thursday-15th",level:2},{value:"Friday 16th",id:"friday-16th",level:2},{value:"Monday 19th",id:"monday-19th",level:2},{value:"Tuesday 20th",id:"tuesday-20th",level:2},{value:"Wednesday 21st",id:"wednesday-21st",level:2},{value:"Thursday 22nd",id:"thursday-22nd",level:2},{value:"Friday 23rd",id:"friday-23rd",level:2},{value:"Monday 26th",id:"monday-26th",level:2},{value:"Tuesday 27th",id:"tuesday-27th",level:2},{value:"Wednesday 28th",id:"wednesday-28th",level:2},{value:"Thursday 29th",id:"thursday-29th",level:2},{value:"Friday 30th",id:"friday-30th",level:2},{value:"Sunday 1st",id:"sunday-1st",level:2}],p={toc:m};function u(e){let{components:t,...a}=e;return(0,n.kt)("wrapper",(0,i.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h2",{id:"monday-5th"},"Monday 5th"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"December notes and 2025 summary."),(0,n.kt)("li",{parentName:"ul"},"Planning long term work"),(0,n.kt)("li",{parentName:"ul"},"Some optimisation work on orbital interpolation"),(0,n.kt)("li",{parentName:"ul"},"Cleaning up issue tracker",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Closed previous Epic (joust)"),(0,n.kt)("li",{parentName:"ul"},"New epic (combat alpha)"))),(0,n.kt)("li",{parentName:"ul"},"Adding components to represent engine thrust and mass flow",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Fixing everything that interacted with engine burns to use these")))),(0,n.kt)("h2",{id:"tuesday-6th"},"Tuesday 6th"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Investigating per-chunk dirty bits for ",(0,n.kt)("inlineCode",{parentName:"li"},"Myriad.ECS"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Need a counting bloom filter (to un-set dirty bits) if using bloom filter"),(0,n.kt)("li",{parentName:"ul"},"Clearing a dirty bit that's already clear must be a no-op, so a counting bloom filter isn't good enough"),(0,n.kt)("li",{parentName:"ul"},"If dirty bits aren't components this becomes a new dimension the safety system must handle"),(0,n.kt)("li",{parentName:"ul"},"This seems like a lot of effort for marginal gain. Just doing chunk-shared components would probably be better."))),(0,n.kt)("li",{parentName:"ul"},"Optimising bloom filter for fast query pre-filtering",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Expanded from 384 buts to 512 bits"),(0,n.kt)("li",{parentName:"ul"},"Sped up SIMD path by reducing copying"))),(0,n.kt)("li",{parentName:"ul"},"Added implicit cast from ",(0,n.kt)("inlineCode",{parentName:"li"},"Entity")," to ",(0,n.kt)("inlineCode",{parentName:"li"},"EntityId")),(0,n.kt)("li",{parentName:"ul"},"Adding unique IDs to kepler bodies, so they can be identified across the network",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Just use Wikidata IDs, parsed as ",(0,n.kt)("inlineCode",{parentName:"li"},"uint32")))),(0,n.kt)("li",{parentName:"ul"},'Starting work on orbit "events"',(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},'Calculating "major" body and distance to it in integrator'),(0,n.kt)("li",{parentName:"ul"},"Checking for change in major body (SOI change event)"),(0,n.kt)("li",{parentName:"ul"},"Checking for change in sign of distance delta (periapsis/apoapsis)"))),(0,n.kt)("li",{parentName:"ul"},"Implementing equality for ",(0,n.kt)("inlineCode",{parentName:"li"},"EntityId")," by hand instead of using ",(0,n.kt)("inlineCode",{parentName:"li"},"record")," - compatible with Burst compiler")),(0,n.kt)("h2",{id:"wednesday-7th"},"Wednesday 7th"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Storing generated events in rail pages"),(0,n.kt)("li",{parentName:"ul"},"Updating inspector to show events"),(0,n.kt)("li",{parentName:"ul"},"Investigating why major body in Luna orbit changes between Earth and Sol!",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Could use hill sphere generated as part of planet asset. SOI isn't truly spherical though"),(0,n.kt)("li",{parentName:"ul"},"Using ",(0,n.kt)("span",{parentName:"li",className:"math math-inline"},(0,n.kt)("span",{parentName:"span",className:"katex"},(0,n.kt)("span",{parentName:"span",className:"katex-mathml"},(0,n.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,n.kt)("semantics",{parentName:"math"},(0,n.kt)("mrow",{parentName:"semantics"},(0,n.kt)("mi",{parentName:"mrow"},"G"),(0,n.kt)("mi",{parentName:"mrow"},"M"),(0,n.kt)("mi",{parentName:"mrow",mathvariant:"normal"},"/"),(0,n.kt)("msup",{parentName:"mrow"},(0,n.kt)("mi",{parentName:"msup"},"r"),(0,n.kt)("mn",{parentName:"msup"},"3"))),(0,n.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"GM/r^3")))),(0,n.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,n.kt)("span",{parentName:"span",className:"base"},(0,n.kt)("span",{parentName:"span",className:"strut",style:{height:"1.0641em",verticalAlign:"-0.25em"}}),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.10903em"}},"GM"),(0,n.kt)("span",{parentName:"span",className:"mord"},"/"),(0,n.kt)("span",{parentName:"span",className:"mord"},(0,n.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.02778em"}},"r"),(0,n.kt)("span",{parentName:"span",className:"msupsub"},(0,n.kt)("span",{parentName:"span",className:"vlist-t"},(0,n.kt)("span",{parentName:"span",className:"vlist-r"},(0,n.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.8141em"}},(0,n.kt)("span",{parentName:"span",style:{top:"-3.063em",marginRight:"0.05em"}},(0,n.kt)("span",{parentName:"span",className:"pstrut",style:{height:"2.7em"}}),(0,n.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,n.kt)("span",{parentName:"span",className:"mord mtight"},"3"))))))))))))," instead of ",(0,n.kt)("span",{parentName:"li",className:"math math-inline"},(0,n.kt)("span",{parentName:"span",className:"katex"},(0,n.kt)("span",{parentName:"span",className:"katex-mathml"},(0,n.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,n.kt)("semantics",{parentName:"math"},(0,n.kt)("mrow",{parentName:"semantics"},(0,n.kt)("mi",{parentName:"mrow"},"G"),(0,n.kt)("mi",{parentName:"mrow"},"M"),(0,n.kt)("mi",{parentName:"mrow",mathvariant:"normal"},"/"),(0,n.kt)("msup",{parentName:"mrow"},(0,n.kt)("mi",{parentName:"msup"},"r"),(0,n.kt)("mn",{parentName:"msup"},"2"))),(0,n.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"GM/r^2")))),(0,n.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,n.kt)("span",{parentName:"span",className:"base"},(0,n.kt)("span",{parentName:"span",className:"strut",style:{height:"1.0641em",verticalAlign:"-0.25em"}}),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.10903em"}},"GM"),(0,n.kt)("span",{parentName:"span",className:"mord"},"/"),(0,n.kt)("span",{parentName:"span",className:"mord"},(0,n.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.02778em"}},"r"),(0,n.kt)("span",{parentName:"span",className:"msupsub"},(0,n.kt)("span",{parentName:"span",className:"vlist-t"},(0,n.kt)("span",{parentName:"span",className:"vlist-r"},(0,n.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.8141em"}},(0,n.kt)("span",{parentName:"span",style:{top:"-3.063em",marginRight:"0.05em"}},(0,n.kt)("span",{parentName:"span",className:"pstrut",style:{height:"2.7em"}}),(0,n.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,n.kt)("span",{parentName:"span",className:"mord mtight"},"2"))))))))))))," produces better results"))),(0,n.kt)("li",{parentName:"ul"},"Encoding rail page events into network package",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Adding support for writing interleaved sequences of compressed doubles to ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/martindevans/HandySerialization"},"HandySerialization"),".")))),(0,n.kt)("h2",{id:"thursday-8th"},"Thursday 8th"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Testing multiplayer",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Seems to be allocating an enormous amount",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Bug in ",(0,n.kt)("inlineCode",{parentName:"li"},"Myriad.ECS"),' "Collect" queries (infinitely growing capacity)'),(0,n.kt)("li",{parentName:"ul"},"Chasing down allocations in UI (TextMeshPro)",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Editor only allocations of strings!"))))),(0,n.kt)("li",{parentName:"ul"},"Bullets aren't properly synced?",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"They appear on clients, but look awful"))),(0,n.kt)("li",{parentName:"ul"},"Investigating poor performance",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Reducing triangle counts on all planets (probably not actually important, but an easy win)"),(0,n.kt)("li",{parentName:"ul"},"Bullet stuff is too expensive:",(0,n.kt)("ul",{parentName:"li",className:"contains-task-list"},(0,n.kt)("li",{parentName:"ul",className:"task-list-item"},(0,n.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ",(0,n.kt)("inlineCode",{parentName:"li"},"RailIntegrator"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},'Looks like there are "urgent" entities blocking the queue'))),(0,n.kt)("li",{parentName:"ul",className:"task-list-item"},(0,n.kt)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ",(0,n.kt)("inlineCode",{parentName:"li"},"SetWorldPositionFromRail"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"This one is always expensive"))),(0,n.kt)("li",{parentName:"ul",className:"task-list-item"},(0,n.kt)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ",(0,n.kt)("inlineCode",{parentName:"li"},"SetScenePositionFromRelativeFuturePosition"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Even with no entities matched!"),(0,n.kt)("li",{parentName:"ul"},"Skipping more work if matched entity count is zero"),(0,n.kt)("li",{parentName:"ul"},"Optimised ",(0,n.kt)("inlineCode",{parentName:"li"},"FindKeplerObjects")," (span lists)"))),(0,n.kt)("li",{parentName:"ul",className:"task-list-item"},(0,n.kt)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","GPU bullet rendering",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Early out if there are no bullet edges"))),(0,n.kt)("li",{parentName:"ul",className:"task-list-item"},(0,n.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Collisions are expensive",(0,n.kt)("ul",{parentName:"li",className:"contains-task-list"},(0,n.kt)("li",{parentName:"ul",className:"task-list-item"},(0,n.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Got octree ",(0,n.kt)("em",{parentName:"li"},"and")," SAP being setup - octree is used for rendering"))))))))),(0,n.kt)("li",{parentName:"ul"},"Refactored rail events to store Kepler body ID instead of entity",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Significantly simplifies networking!")))),(0,n.kt)("h2",{id:"monday-12th"},"Monday 12th"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Debugging why bullet rails are being marked as urgent",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"They integrate 0.5s ahead, but urgency is if they're below min length"),(0,n.kt)("li",{parentName:"ul"},"Set min length to just a tiny bit below the pre-integrate time"))),(0,n.kt)("li",{parentName:"ul"},"Fixed name getting set every frame in the bullet test scene, which was ruining performance"),(0,n.kt)("li",{parentName:"ul"},"Investigating cost of setting up bullet sweep & prune",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Largest cost seems to be setting up the job, copying data into input buffers"),(0,n.kt)("li",{parentName:"ul"},"Possibly due to checking entity structured"),(0,n.kt)("li",{parentName:"ul"},"Checking the entire chunk instead of each entity individually (for aspect)"),(0,n.kt)("li",{parentName:"ul"},'Created a "chunk aspect" to retrieve entity structure once per chunk too'))),(0,n.kt)("li",{parentName:"ul"},"Adding a way to check entity structure (",(0,n.kt)("inlineCode",{parentName:"li"},"HasComponent"),") for chunk handle to ",(0,n.kt)("inlineCode",{parentName:"li"},"Myriad.ECS")),(0,n.kt)("li",{parentName:"ul"},"Tested with 1300 active spaceships, top systems:",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"SetWorldPositionFromRail"),": 3ms",(0,n.kt)("ul",{parentName:"li",className:"contains-task-list"},(0,n.kt)("li",{parentName:"ul",className:"task-list-item"},(0,n.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Use cheaper sampling modes for far away bodies?",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Would need to be careful about collision detection quality. Not just distance from camera, but also proximity to other bodies"))))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"RailIntegrator"),": 1.1ms"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"CopyScenePositionToUnityTransform"),": 0.75ms, 0.6ms (2 different layers)",(0,n.kt)("ul",{parentName:"li",className:"contains-task-list"},(0,n.kt)("li",{parentName:"ul",className:"task-list-item"},(0,n.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Don't do this work for things that don't need it (e.g. not in camera view)"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"CreateRailImpactSymbol"),": 0.8ms",(0,n.kt)("ul",{parentName:"li",className:"contains-task-list"},(0,n.kt)("li",{parentName:"ul",className:"task-list-item"},(0,n.kt)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","Opt some entities out of this checking",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Or specifically opt ",(0,n.kt)("em",{parentName:"li"},"into")," allowing a rail end symbol"),(0,n.kt)("li",{parentName:"ul"},"We don't actually want this for bullets"))))))),(0,n.kt)("li",{parentName:"ul"},"Fixed memory leak of orbital rail event collection if rail is modified while job is running")),(0,n.kt)("h2",{id:"tuesday-13th"},"Tuesday 13th"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Sharing the array of kepler data between all jobs in integrator, instead of making a copy per job"),(0,n.kt)("li",{parentName:"ul"},"Pre-integrating bullets for a bit more time, and shortening the min-rail length. Reduce the chance of bullets becoming urgent."),(0,n.kt)("li",{parentName:"ul"},"Opted bullets out of automatic creation of impact symbols",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Saves time"),(0,n.kt)("li",{parentName:"ul"},"Don't want these symbols for bullets anyway!"))),(0,n.kt)("li",{parentName:"ul"},"Tested in multiplayer again",(0,n.kt)("ul",{parentName:"li",className:"contains-task-list"},(0,n.kt)("li",{parentName:"ul"},"Perf is better"),(0,n.kt)("li",{parentName:"ul",className:"task-list-item"},(0,n.kt)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","Events aren't synced?",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Setting events into page"),(0,n.kt)("li",{parentName:"ul"},"Fixed syncing of null events"))),(0,n.kt)("li",{parentName:"ul",className:"task-list-item"},(0,n.kt)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","Possible memory leak in encoding/decoding",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"False positive as far as I can tell")))))),(0,n.kt)("h2",{id:"wednesday-14th"},"Wednesday 14th"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Investigating pooling for tree view",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Needs to be added in to the treeview library itself"))),(0,n.kt)("li",{parentName:"ul"},"Adding orbit picking panel to multiplayer game scene",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Added gizmo creation systems"),(0,n.kt)("li",{parentName:"ul"},"Changing orbit with gizmo works in multiplayer!"))),(0,n.kt)("li",{parentName:"ul"},"Upgrading to Unity 6.3",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Installing editor"),(0,n.kt)("li",{parentName:"ul"},"Upgraded project"),(0,n.kt)("li",{parentName:"ul"},"Name collision with ",(0,n.kt)("inlineCode",{parentName:"li"},"Entity"),"/",(0,n.kt)("inlineCode",{parentName:"li"},"EntityId")," since they've been moved into ",(0,n.kt)("inlineCode",{parentName:"li"},"UnityEngine")),(0,n.kt)("li",{parentName:"ul"},"Reimport",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Surprisingly fast!"))),(0,n.kt)("li",{parentName:"ul"},"Everything seems to work")))),(0,n.kt)("h2",{id:"thursday-15th"},"Thursday 15th"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Testing in Unity 6.3 properly",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Disabled old input system"),(0,n.kt)("li",{parentName:"ul"},"Replaced some deprecated method calls"),(0,n.kt)("li",{parentName:"ul"},"Updating packages"))),(0,n.kt)("li",{parentName:"ul"},"Added narrowphase colliders to bullet test scene"),(0,n.kt)("li",{parentName:"ul"},"Investigating using the same sweep and prune collection for rendering as collision",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Not really practical, S&P stores edges not points"))),(0,n.kt)("li",{parentName:"ul"},"Caching some more data about the next chain link entity",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Using this cache to accelerate sweep and prune filling (don't need to follow the entity relation, it's all stored locally)"),(0,n.kt)("li",{parentName:"ul"},"Speeds up S&P setup work by about ~30%, since it no longer has to query entity structure at all"))),(0,n.kt)("li",{parentName:"ul"},"Moved all structural checks to the ",(0,n.kt)("inlineCode",{parentName:"li"},"QueryBuilder"),", instead of doing it dynamically within the query",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"About ~30% faster"),(0,n.kt)("li",{parentName:"ul"},"Added helpers in ",(0,n.kt)("inlineCode",{parentName:"li"},"Myriad.ECS")," to do this more cleanly for future queries")))),(0,n.kt)("h2",{id:"friday-16th"},"Friday 16th"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Doing some planning for the combat alpha"),(0,n.kt)("li",{parentName:"ul"},"Investigating damage model system (optimising)",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Using ",(0,n.kt)("inlineCode",{parentName:"li"},"TryGetComponentRef")),(0,n.kt)("li",{parentName:"ul"},"Adding measurements of cache hit rates"))),(0,n.kt)("li",{parentName:"ul"},"Adding ",(0,n.kt)("inlineCode",{parentName:"li"},"TryGetComponentRef")," to ",(0,n.kt)("inlineCode",{parentName:"li"},"Myriad.ECS")," - merges together several checks into one method"),(0,n.kt)("li",{parentName:"ul"},"Disabled legacy Unity input system (it's being deprecated)",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"This broke some FUI stuff",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Fixing usage in FUI framework")))))),(0,n.kt)("h2",{id:"monday-19th"},"Monday 19th"),(0,n.kt)("ul",{className:"contains-task-list"},(0,n.kt)("li",{parentName:"ul"},"More fixing FUI framework to not use legacy ",(0,n.kt)("inlineCode",{parentName:"li"},"Input")," system"),(0,n.kt)("li",{parentName:"ul"},"Tweaking system list to show time relative to total update time (16ms)"),(0,n.kt)("li",{parentName:"ul"},"Noticed potential resource leak in Job based queries",(0,n.kt)("ul",{parentName:"li",className:"contains-task-list"},(0,n.kt)("li",{parentName:"ul"},"Added ",(0,n.kt)("inlineCode",{parentName:"li"},"OnSystemDisabled")," callback to ",(0,n.kt)("inlineCode",{parentName:"li"},"Myriad.ECS")," system groups and system group items"),(0,n.kt)("li",{parentName:"ul",className:"task-list-item"},(0,n.kt)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","Use this in demo/test job based query systems",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"These aren't in use in the main game yet, need to be cautious when I do use them"))))),(0,n.kt)("li",{parentName:"ul",className:"task-list-item"},(0,n.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Investigating how to dismiss orbit gizmo when clicking on empty space",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},'There\'s already "backboards" at the camera far plane to capture clicks on nothing',(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Clicks on backboard are inconsistent?",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Camera frustum in scene view is misaligned with the actual ray!?")))))))),(0,n.kt)("h2",{id:"tuesday-20th"},"Tuesday 20th"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Investigating weird camera frustum issue",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"Mouse.current.position.value")," returns different value when called in ",(0,n.kt)("inlineCode",{parentName:"li"},"OnDrawGizmos"),"!"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"Physics.Raycast")," returns different (correct) results compared to the camera ",(0,n.kt)("inlineCode",{parentName:"li"},"PhysicsRaycaster"),"!"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"PhysicsRaycaster")," calculates the distance to the far plane incorrectly, so it misses some collisions when the camera is rotated."),(0,n.kt)("li",{parentName:"ul"},"Unity discussion topic: ",(0,n.kt)("a",{parentName:"li",href:"https://discussions.unity.com/t/physicsraycaster-incorrect-ray-length/1704971"},"https://discussions.unity.com/t/physicsraycaster-incorrect-ray-length/1704971"))))),(0,n.kt)("h2",{id:"wednesday-21st"},"Wednesday 21st"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Working around physics raycaster bug",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Adding a child camera, disabled, with far plane set to 1.5x parent camera. Physics raycaster is attached to this."),(0,n.kt)("li",{parentName:"ul"},"Created a script to manage this process"),(0,n.kt)("li",{parentName:"ul"},"Producing a reproduction project to submit a Unity bug report"),(0,n.kt)("li",{parentName:"ul"},"Applied workaround/hack with that extra camera to the camera compositing stack prefab"),(0,n.kt)("li",{parentName:"ul"},"Clicking in empty space dismisses current selection. Finally!")))),(0,n.kt)("h2",{id:"thursday-22nd"},"Thursday 22nd"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},'Investigated adding "high watermark" to system time, so systems which spike leave a visible marker',(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Results are too noisy to be useful"))),(0,n.kt)("li",{parentName:"ul"},"Started creating system to create, update and destroy icons for orbit metadata"),(0,n.kt)("li",{parentName:"ul"},"Added new ",(0,n.kt)("inlineCode",{parentName:"li"},"TypedReference<T>")," component to ",(0,n.kt)("inlineCode",{parentName:"li"},"Myriad.ECS"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"This helps with the frequent problem of following entity relationships being costly (due to multiple repeated checks) in two ways:",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Checks are all done at once, combining some of the work"),(0,n.kt)("li",{parentName:"ul"},"Check results are cached, so next time the link is cheaper to follow")))))),(0,n.kt)("h2",{id:"friday-23rd"},"Friday 23rd"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Refactoring ",(0,n.kt)("inlineCode",{parentName:"li"},"TypedReference<T>")," into ",(0,n.kt)("inlineCode",{parentName:"li"},"TypedEntityReference<T>"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Code generation for multiple types, from 1 to 16"))),(0,n.kt)("li",{parentName:"ul"},"Refactoring some existing systems to use ",(0,n.kt)("inlineCode",{parentName:"li"},"TypedEntityReference"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Attach to planet surface"),(0,n.kt)("li",{parentName:"ul"},"Attach to rail at future time"))),(0,n.kt)("li",{parentName:"ul"},"Noticed that orbit gizmo is in wrong position for some time (1 frame?) when first created",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Looks like this has been an issue at least for a couple of weeks, so it wasn't broken by the ",(0,n.kt)("inlineCode",{parentName:"li"},"TypedEntityReference")," changes"),(0,n.kt)("li",{parentName:"ul"},"Moved prefab out to xyz=1000000, so it's not visible until the system places it in the right place one frame later")))),(0,n.kt)("h2",{id:"monday-26th"},"Monday 26th"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Working on systems for creating and maintaining rail metadata icons"),(0,n.kt)("li",{parentName:"ul"},'Created a general purpose "zipper" to keep two rails in sync',(0,n.kt)("ul",{parentName:"li",className:"contains-task-list"},(0,n.kt)("li",{parentName:"ul"},"This same pattern is used other places, could port there",(0,n.kt)("ul",{parentName:"li",className:"contains-task-list"},(0,n.kt)("li",{parentName:"ul",className:"task-list-item"},(0,n.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Rail -> RelativeRail"),(0,n.kt)("li",{parentName:"ul",className:"task-list-item"},(0,n.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Rail -> NetworkRail"))),(0,n.kt)("li",{parentName:"ul"},'Used this to create new "icon rail" that is zipped with the main orbital rail to create icons for all metadata events'),(0,n.kt)("li",{parentName:"ul",className:"task-list-item"},(0,n.kt)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","Need to remove icons which are in the past")))),(0,n.kt)("h2",{id:"tuesday-27th"},"Tuesday 27th"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Removing rail icons which are in the past"),(0,n.kt)("li",{parentName:"ul"},"Profiling relative rail attachment system",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Adding hinting for rail sampling (caching some work)"),(0,n.kt)("li",{parentName:"ul"},"Storing kepler hierarchy offset (caching more work)"),(0,n.kt)("li",{parentName:"ul"},"Investigating why cache is refreshing more often than expected",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"It's fine, this is from picking results (mouse moving, busting cache)"))),(0,n.kt)("li",{parentName:"ul"},"Sharing ",(0,n.kt)("inlineCode",{parentName:"li"},"CommandBuffer")," used for deletion with other systems"))),(0,n.kt)("li",{parentName:"ul"},"Using new ",(0,n.kt)("inlineCode",{parentName:"li"},"TypedReference")," and ",(0,n.kt)("inlineCode",{parentName:"li"},"TryGetComponentRef")," in more places:",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"SetWorldPositionFromSurfaceCoordinate")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"DrawBulletsWithGpuCompute")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"NativeEcsOctree")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"CopyWorldPositionBetweenEntities")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"CreateRailImpactSymbol")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"SetScenePositionFromWorldPosition")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"FindKeplerObjects")))),(0,n.kt)("li",{parentName:"ul"},"Fixing issue in ",(0,n.kt)("inlineCode",{parentName:"li"},"Myriad.ECS")," that caused ",(0,n.kt)("inlineCode",{parentName:"li"},"TryGetReference")," to not work the same as ",(0,n.kt)("inlineCode",{parentName:"li"},"HasComponent"),"+",(0,n.kt)("inlineCode",{parentName:"li"},"GetComponent"))),(0,n.kt)("h2",{id:"wednesday-28th"},"Wednesday 28th"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Investigating why adding orbit gizmo sometimes cuts line short but then doesn't show gizmo",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Seems to be when gizmo is placed at a time past the line max time length (soft cap, so it can be exceeded in some cases)"),(0,n.kt)("li",{parentName:"ul"},"Extending the line past this time makes the gizmo appear",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"It's out at xyz=1000000, i.e. position it not being set"))),(0,n.kt)("li",{parentName:"ul"},"Modified adding a burn to a rail to synchronously integrate up to the start of the burn right away: ensures rail isn't too short"),(0,n.kt)("li",{parentName:"ul"},"Modified rail integrator to integrate up to max length or last_burn+extra_time whichever is ",(0,n.kt)("em",{parentName:"li"},"later"),". This means there's always some rail showing what the last burn does"))),(0,n.kt)("li",{parentName:"ul"},"Using Fused-Multiply-Add in RKF45 integrator, faster and more accurate"),(0,n.kt)("li",{parentName:"ul"},"Adding some extension methods to collections to do more work in jobs",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Adding ",(0,n.kt)("inlineCode",{parentName:"li"},"[BurstCompile]")," to these new jobs"),(0,n.kt)("li",{parentName:"ul"},"Reviewing other jobs in codebase to burst compile where possible"))),(0,n.kt)("li",{parentName:"ul"},"Researching GPU driven text rendering",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"I can extract glyph info from text mesh pro"),(0,n.kt)("li",{parentName:"ul"},"Instanced render quads with this glyph info"),(0,n.kt)("li",{parentName:"ul"},"Potentially call TMP pixel shader, unclear if it can be imported?")))),(0,n.kt)("h2",{id:"thursday-29th"},"Thursday 29th"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Updating Myriad version in ECS benchmark: ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/friflo/ECS.CSharp.Benchmark-common-use-cases/pull/13"},"https://github.com/friflo/ECS.CSharp.Benchmark-common-use-cases/pull/13")),(0,n.kt)("li",{parentName:"ul"},"Cleaning up ",(0,n.kt)("inlineCode",{parentName:"li"},"GetRefTuple")," in Myriad, pushed the core logic up into ",(0,n.kt)("inlineCode",{parentName:"li"},"Chunk")),(0,n.kt)("li",{parentName:"ul"},"Profiling SolarSystem scene",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Removed allocation in ",(0,n.kt)("inlineCode",{parentName:"li"},"ResizableComputeBuffer")," (using native memory)"),(0,n.kt)("li",{parentName:"ul"},"Fixed closure allocation in ",(0,n.kt)("inlineCode",{parentName:"li"},"ConvertPagedRailToIconRail")),(0,n.kt)("li",{parentName:"ul"},"Investigating Cinemachine ",(0,n.kt)("inlineCode",{parentName:"li"},"ResolveAndReadInputAction")," allocation - seems to be a profiler false positive"))),(0,n.kt)("li",{parentName:"ul"},"Building standalone player (more accurate profiling)",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Investigating usage of double in ",(0,n.kt)("inlineCode",{parentName:"li"},"NBodyLine")," shader (not supported on Vulkan)"),(0,n.kt)("li",{parentName:"ul"},'Building normally works, it\'s only building a development build with "auto connect profiler" that does not!')))),(0,n.kt)("h2",{id:"friday-30th"},"Friday 30th"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Building development build (no profiler)",(0,n.kt)("ul",{parentName:"li",className:"contains-task-list"},(0,n.kt)("li",{parentName:"ul"},"Fails with some Burst/AVX problems",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Only from one particular AVX optimised method? Deleted it for now."))),(0,n.kt)("li",{parentName:"ul"},"Noticed some allocations:",(0,n.kt)("ul",{parentName:"li",className:"contains-task-list"},(0,n.kt)("li",{parentName:"ul",className:"task-list-item"},(0,n.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ",(0,n.kt)("inlineCode",{parentName:"li"},"CinemachineInputAxisController.Update"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Investigated this one before and been unable to resolve it"))),(0,n.kt)("li",{parentName:"ul",className:"task-list-item"},(0,n.kt)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ",(0,n.kt)("inlineCode",{parentName:"li"},"EventSystem.Update"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Setting ",(0,n.kt)("inlineCode",{parentName:"li"},"MaxRayIntersections")," on ",(0,n.kt)("inlineCode",{parentName:"li"},"PhysicsRaycaster")," to fix this"))),(0,n.kt)("li",{parentName:"ul",className:"task-list-item"},(0,n.kt)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ",(0,n.kt)("inlineCode",{parentName:"li"},"BaseSimulationHost.Update"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"This is due to Unity not properly taking an allocation free path in struct allocation when generics are involved"))))),(0,n.kt)("li",{parentName:"ul",className:"task-list-item"},(0,n.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","OrbitPicking is very expensive",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"This needs to be jobbified or something"))))),(0,n.kt)("li",{parentName:"ul"},"Experimenting with using ",(0,n.kt)("inlineCode",{parentName:"li"},"uint2")," instead of ",(0,n.kt)("inlineCode",{parentName:"li"},"double"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Writing a function to convert to single precision"))),(0,n.kt)("li",{parentName:"ul"},"Added loop unrolling to ",(0,n.kt)("inlineCode",{parentName:"li"},"Myriad.ECS")," queries")),(0,n.kt)("h2",{id:"sunday-1st"},"Sunday 1st"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Bonus round!"),(0,n.kt)("li",{parentName:"ul"},'Added a primitive "soft float" system just for doubles on Vulkan',(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Supported ops:",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Convert to float using only integer maths"),(0,n.kt)("li",{parentName:"ul"},'Compare 2 "soft doubles" to see which is greater')))))))}u.isMDXComponent=!0}}]);