"use strict";(self.webpackChunkephemeris_notes=self.webpackChunkephemeris_notes||[]).push([[3190],{3905:(e,t,n)=>{n.d(t,{Zo:()=>m,kt:()=>d});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),p=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},m=function(e){var t=p(e.components);return r.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),u=p(n),d=a,h=u["".concat(s,".").concat(d)]||u[d]||c[d]||i;return n?r.createElement(h,o(o({ref:t},m),{},{components:n})):r.createElement(h,o({ref:t},m))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var p=2;p<i;p++)o[p]=n[p];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}u.displayName="MDXCreateElement"},8376:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>c,frontMatter:()=>i,metadata:()=>l,toc:()=>p});var r=n(7462),a=(n(7294),n(3905));const i={title:"CPU Line Rendering",tags:["TechnicalDetails","Rendering","GPU"]},o=void 0,l={unversionedId:"ImplementationDetails/Rendering/CPULines",id:"ImplementationDetails/Rendering/CPULines",title:"CPU Line Rendering",description:"In part 1 we looked at how to take a buffer of positions and the render them on the GPU with all kinds of helpful features such as constant screen size, double precision and stencil support. But where do we get the positions to go in that buffer?",source:"@site/docs/ImplementationDetails/Rendering/CPULines.md",sourceDirName:"ImplementationDetails/Rendering",slug:"/ImplementationDetails/Rendering/CPULines",permalink:"/EphemerisNotes/ImplementationDetails/Rendering/CPULines",draft:!1,editUrl:"https://github.com/martindevans/EphemerisNotes/tree/master/docs/ImplementationDetails/Rendering/CPULines.md",tags:[{label:"TechnicalDetails",permalink:"/EphemerisNotes/tags/technical-details"},{label:"Rendering",permalink:"/EphemerisNotes/tags/rendering"},{label:"GPU",permalink:"/EphemerisNotes/tags/gpu"}],version:"current",frontMatter:{title:"CPU Line Rendering",tags:["TechnicalDetails","Rendering","GPU"]},sidebar:"tutorialSidebar",previous:{title:"Generating Meshes",permalink:"/EphemerisNotes/ImplementationDetails/ProceduralGeneration/GeneratingMeshes"},next:{title:"CarmackStarRendering",permalink:"/EphemerisNotes/ImplementationDetails/Rendering/CarmackStarRendering"}},s={},p=[{value:"Solution #1",id:"solution-1",level:3}],m={toc:p};function c(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"In ",(0,a.kt)("a",{parentName:"p",href:"/EphemerisNotes/ImplementationDetails/Rendering/GPULines"},"part 1")," we looked at how to take a buffer of positions and the render them on the GPU with all kinds of helpful features such as constant screen size, double precision and stencil support. But where do we get the positions to go in that buffer?"),(0,a.kt)("admonition",{type:"danger"},(0,a.kt)("p",{parentName:"admonition"},"todo: write article!")),(0,a.kt)("p",null,"problems to solve:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"can we reduce vertex count when rendering long orbits",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"http://blog.johannesmp.com/2022/06/30/KSP2-Dev-Diary_Orbit-Tessellation/"},"http://blog.johannesmp.com/2022/06/30/KSP2-Dev-Diary_Orbit-Tessellation/")))),(0,a.kt)("li",{parentName:"ul"},"closed orbits",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"just set the start and end point to the same position seems to look fine"))),(0,a.kt)("li",{parentName:"ul"},"stacked lines when the orbit isn't ",(0,a.kt)("em",{parentName:"li"},"quite")," closed",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Can probably detect this on CPU and cut off the orbit at the approx overlap point"),(0,a.kt)("li",{parentName:"ul"},"Maybe we don't need to solve it - make orbit markers be dragged ",(0,a.kt)("em",{parentName:"li"},"along")," the line and you don't need to be able to click on a specific line"))),(0,a.kt)("li",{parentName:"ul"},"more detail (approximated from interpolation) to smooth curves",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Could probably do this in the vertex shader",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Each orbit data point also stores normal"),(0,a.kt)("li",{parentName:"ul"},"Vertices are tagged with index of data ",(0,a.kt)("em",{parentName:"li"},"and")," interpolation factor"),(0,a.kt)("li",{parentName:"ul"},"Vertex shader samples 2 data points and uses normal data to do a smooth curved interpolation"))),(0,a.kt)("li",{parentName:"ul"},"Probably not necessary if reduced count out of camera view works - start with max detail and reduce.")))),(0,a.kt)("h3",{id:"solution-1"},"Solution #1"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Takes raw data from sim"),(0,a.kt)("li",{parentName:"ol"},"Job inserts interpolated points where camera is looking"),(0,a.kt)("li",{parentName:"ol"},"Job remove points where camera is not looking"),(0,a.kt)("li",{parentName:"ol"},"Render using normal ",(0,a.kt)("a",{parentName:"li",href:"/EphemerisNotes/ImplementationDetails/Rendering/GPULines"},"GPULines"),", with inteprolated data put into the buffer")))}c.isMDXComponent=!0}}]);