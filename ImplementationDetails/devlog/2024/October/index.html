<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-ImplementationDetails/devlog/2024/October">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">October | Ephemeris Notes</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://martindevans.github.io/EphemerisNotes/ImplementationDetails/devlog/2024/October/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="October | Ephemeris Notes"><meta data-rh="true" name="description" content="Tuesday 1st"><meta data-rh="true" property="og:description" content="Tuesday 1st"><link data-rh="true" rel="icon" href="/EphemerisNotes/img/rocket_64.png"><link data-rh="true" rel="canonical" href="https://martindevans.github.io/EphemerisNotes/ImplementationDetails/devlog/2024/October/"><link data-rh="true" rel="alternate" href="https://martindevans.github.io/EphemerisNotes/ImplementationDetails/devlog/2024/October/" hreflang="en"><link data-rh="true" rel="alternate" href="https://martindevans.github.io/EphemerisNotes/ImplementationDetails/devlog/2024/October/" hreflang="x-default"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous"><link rel="stylesheet" href="/EphemerisNotes/assets/css/styles.d5e10428.css">
<link rel="preload" href="/EphemerisNotes/assets/js/runtime~main.58e07b7e.js" as="script">
<link rel="preload" href="/EphemerisNotes/assets/js/main.30a724ef.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(e){}return e}()||function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/EphemerisNotes/"><div class="navbar__logo"><img src="/EphemerisNotes/img/rocket_512.png" alt="Ephemeris Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/EphemerisNotes/img/rocket_512.png" alt="Ephemeris Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Ephemeris</b></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/EphemerisNotes/">Ephemeris</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/EphemerisNotes/category/implementation-details/">Implementation Details</a><button aria-label="Toggle the collapsible sidebar category &#x27;Implementation Details&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/EphemerisNotes/ImplementationDetails/Content Assets/">Content Assets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/EphemerisNotes/ImplementationDetails/Fonts/">Fonts</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/EphemerisNotes/ImplementationDetails/Marketing/">Marketing</a><button aria-label="Toggle the collapsible sidebar category &#x27;Marketing&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/EphemerisNotes/ImplementationDetails/Modding/">Modding</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/EphemerisNotes/ImplementationDetails/Multiplayer/Frameworks/">Multiplayer</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/EphemerisNotes/ImplementationDetails/Physics/Integration/">Physics</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/EphemerisNotes/ImplementationDetails/PrecisionScale/">Precision &amp; Scale</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/EphemerisNotes/ImplementationDetails/ProceduralGeneration/EditorProceduralGeneration/">ProceduralGeneration</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/EphemerisNotes/ImplementationDetails/Rendering/CPULines/">Rendering</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/EphemerisNotes/ImplementationDetails/UnityPlugins/">UnityPlugins</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/EphemerisNotes/category/development-log/">Development Log</a><button aria-label="Toggle the collapsible sidebar category &#x27;Development Log&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/EphemerisNotes/category/2024/">2024</a><button aria-label="Toggle the collapsible sidebar category &#x27;2024&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/EphemerisNotes/ImplementationDetails/devlog/2024/June/">June</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/EphemerisNotes/ImplementationDetails/devlog/2024/July/">July</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/EphemerisNotes/ImplementationDetails/devlog/2024/August/">August</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/EphemerisNotes/ImplementationDetails/devlog/2024/September/">September</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/EphemerisNotes/ImplementationDetails/devlog/2024/October/">October</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/EphemerisNotes/ImplementationDetails/devlog/2024/November/">November</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/EphemerisNotes/ImplementationDetails/devlog/2024/December/">December</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/EphemerisNotes/category/2025/">2025</a><button aria-label="Toggle the collapsible sidebar category &#x27;2025&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/EphemerisNotes/category/media/">Media</a><button aria-label="Toggle the collapsible sidebar category &#x27;Media&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/EphemerisNotes/category/web-pages/">Web Pages</a><button aria-label="Toggle the collapsible sidebar category &#x27;Web Pages&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/EphemerisNotes/Design/ISR/Ideas/">Design</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/EphemerisNotes/Rocketry/LaunchVehicles/">Rocketry</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/EphemerisNotes/Setting/">Setting</a><button aria-label="Toggle the collapsible sidebar category &#x27;Setting&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/EphemerisNotes/SolarSystem/Jupiter/Images/">SolarSystem</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/EphemerisNotes/Weapons/Real/Atomic Weapons/">Weapons</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/EphemerisNotes/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/EphemerisNotes/category/implementation-details/"><span itemprop="name">Implementation Details</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/EphemerisNotes/category/development-log/"><span itemprop="name">Development Log</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/EphemerisNotes/category/2024/"><span itemprop="name">2024</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">October</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>October</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tuesday-1st">Tuesday 1st<a href="#tuesday-1st" class="hash-link" aria-label="Direct link to Tuesday 1st" title="Direct link to Tuesday 1st">​</a></h2><ul><li>Replaced <code>Box&lt;T&gt;</code> with <a href="https://docs.unity3d.com/Packages/com.unity.collections@2.5/api/Unity.Collections.NativeReference-1.html" target="_blank" rel="noopener noreferrer"><code>NativeReference&lt;T&gt;</code></a>. Same functionality, but maintained by Unity.</li><li>Added <code>DebugDisplayName</code> component to Myriad</li><li>Showing the display name in the inspector if it exists for an entity</li><li>Better handling of world and system disposal (fixed leaks in rail integrator)</li><li>Made <code>Myriad.ECS.Entity</code> contains a back reference to the <code>World</code> which contains it. significantly simplifying much of the API!</li><li>Added <code>EntityId</code> to <code>Myriad.ECS</code> - does <em>not</em> contain the <code>World</code> backreference. This can be used in Unity Jobs (which can&#x27;t hold a reference to managed objects).</li><li>Fixed up Ephemeris to use <code>EntityId</code> wherever necessary to successfully compile.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="wednesday-2nd">Wednesday 2nd<a href="#wednesday-2nd" class="hash-link" aria-label="Direct link to Wednesday 2nd" title="Direct link to Wednesday 2nd">​</a></h2><ul><li>Reimport all to fix missing Myriad scripts (this worked).</li><li>Started work on UI <code>TextLog</code> component</li><li>Improving UI scroll view</li><li>Working out how to scroll to bottom reliably</li><li>Worked out links in text<ul><li><a href="https://www.spongehammer.com/link-on-the-ui-using-textmesh-pro-in-unity/" target="_blank" rel="noopener noreferrer">https://www.spongehammer.com/link-on-the-ui-using-textmesh-pro-in-unity/</a></li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="thursday-3rd">Thursday 3rd<a href="#thursday-3rd" class="hash-link" aria-label="Direct link to Thursday 3rd" title="Direct link to Thursday 3rd">​</a></h2><ul><li>Updated nbody integrator to make <code>EngineBurnSchedule</code> optional for nbodies</li><li>Added <code>QueryEntityCount</code> to some more systems to help with debugging</li><li>Building <code>NBodyAspect</code><ul><li>Constructing helper functions for rail invalidation</li></ul></li><li>Discovered RKF45 constants may be wrong!<ul><li>Wikipedia page has been updated to state they are wrong</li><li><a href="https://hanspeterschaub.info/basilisk/_downloads/ff1dec450662e914b8e5eed79a1fc01c/Basilisk-Integrators20170724.pdf" target="_blank" rel="noopener noreferrer">This documentation</a> uses different values.</li><li>Investigate more tomorrow!</li></ul></li><li>Updated <code>KeyboardBurnControl</code> to use new nbody aspect</li><li>Fixed leaks in line renderer (not disposing <code>ComputeBuffer</code>)</li><li>Fixed leaks in <code>RailIntegrator</code> (not disposing a <code>NativeReference</code>)</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="friday-4th">Friday 4th<a href="#friday-4th" class="hash-link" aria-label="Direct link to Friday 4th" title="Direct link to Friday 4th">​</a></h2><ul><li>Investigating integrator issues <ul><li>Wikipedia page has been updated to state the constants in table 1 don&#x27;t work</li><li>References:<ul><li><a href="https://www.johndcook.com/blog/2020/02/19/fehlberg/" target="_blank" rel="noopener noreferrer">https://www.johndcook.com/blog/2020/02/19/fehlberg/</a></li><li><a href="https://mtchu.math.ncsu.edu/Teaching/Lectures/MA427/By_subjects/27_rkf45_method.pdf" target="_blank" rel="noopener noreferrer">https://mtchu.math.ncsu.edu/Teaching/Lectures/MA427/By_subjects/27_rkf45_method.pdf</a></li><li><a href="https://hanspeterschaub.info/basilisk/_downloads/ff1dec450662e914b8e5eed79a1fc01c/Basilisk-Integrators20170724.pdf" target="_blank" rel="noopener noreferrer">https://hanspeterschaub.info/basilisk/_downloads/ff1dec450662e914b8e5eed79a1fc01c/Basilisk-Integrators20170724.pdf</a></li></ul></li><li>Cross referencing with the references, some of the numbers in the Wikipedia tables are wrong</li></ul></li><li>Added multi-stepping to the integrator - retrying a step up to N times with smaller and smaller timesteps if the error is too high</li><li>Tested in game - quality of orbits is vastly improved!</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="saturday-5th">Saturday 5th<a href="#saturday-5th" class="hash-link" aria-label="Direct link to Saturday 5th" title="Direct link to Saturday 5th">​</a></h2><ul><li>Tested using <a href="https://en.wikipedia.org/wiki/Kahan_summation_algorithm" target="_blank" rel="noopener noreferrer">Kahan</a> and <a href="https://en.wikipedia.org/wiki/Kahan_summation_algorithm#Further_enhancements" target="_blank" rel="noopener noreferrer">Neumaier</a> summation in the integrator. These are both techniques for summing floating point numbers with very different scales which compensate for the lost precision.<ul><li>Summation is done independently per-axis, so it&#x27;s just a sum of <code>Span&lt;double&gt;</code></li><li>This does not seem to help much at all. Test bench shows energy in test scene (which should remain constant, in a perfect integrator) oscillates approximately the same amount.</li></ul></li><li>Modified integrator to sum all of the derivatives before adding to the state. This means all of the (relatively small) derivatives are added together before being added to the (relatively huge) state vector, at no extra cost.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="monday-7th">Monday 7th<a href="#monday-7th" class="hash-link" aria-label="Direct link to Monday 7th" title="Direct link to Monday 7th">​</a></h2><ul><li>Added synchronous integration to rail integrator if the rail is very short. This avoids issues with the sampler trying to sample beyond the end of the rail after invalidation (at the cost of doing some of that integration work on the main thread)</li><li>Added an easy way to get a <code>NativeAccelerationQuery</code></li><li>Started building <code>NBodyBurnAspect</code> - an aspect for scheduling engine burns on an nbody</li><li>Added <code>GetComponentRefT&lt;T&gt;</code> to <code>Myriad.ECS</code> - returns <code>RefT&lt;T&gt;</code> instead of <code>ref T</code></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tuesday-8th">Tuesday 8th<a href="#tuesday-8th" class="hash-link" aria-label="Direct link to Tuesday 8th" title="Direct link to Tuesday 8th">​</a></h2><ul><li>Added method to schedule new burns to <code>NBodyBurnAspect</code></li><li>Updated <code>KeyboardBurnControl</code> test script to use <code>NBodyBurnAspect</code></li><li>There&#x27;s some skipping when creating burns, but it works! Pod and space station move around relative to each other fairly smoothly even when screaming along at 15km/s.<ul><li>Skipping is probably caused by interpolation in position sampling</li><li>Possibly fixable by crossfading the interpolator (usually done during extrapolation fixup)</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="wednesday-9th">Wednesday 9th<a href="#wednesday-9th" class="hash-link" aria-label="Direct link to Wednesday 9th" title="Direct link to Wednesday 9th">​</a></h2><ul><li>Investigating jerkiness in position sampling when a new burn is created</li><li>Checked kinematics, they all seem correct</li><li>Forward and backward predictions (starting from one end and predicting the opposite end) have around 45m of error in the current test scene.<ul><li>At 35km/s with 60 seconds between points that&#x27;s just 0.00214% error!</li></ul></li><li>Can jerk (i.e. change in acceleration) be derived, to fixup the positional error?<ul><li>Yes!</li><li>Given: <code>offset = 1/6 * jerk * pow(duration, 3)</code></li><li>Therefore: <code>6 * offset / pow(duration, 3) = jerk</code></li><li>This helps (the forward and backward positions of the end points are perfect) but does not entirely eliminate the jerkiness</li></ul></li><li>Consider adding per-entity max-dt for integrator. This would give me a way to limit the step size for the station and the pod in the docking sim<ul><li>Added this, setting the timestep to 1 seconds totally fixes the jittering</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="thursday-10th">Thursday 10th<a href="#thursday-10th" class="hash-link" aria-label="Direct link to Thursday 10th" title="Direct link to Thursday 10th">​</a></h2><ul><li>Added extension methods to setup nbody physics and rail rendering to an entity</li><li>Experimenting with activating sampling fixup when the page current being sampled changes, to smooth out sampling jitter<ul><li>This helps with jerkiness, but ultimately makes overall error worse. The problem is extrapolation is proceeding with old data (i.e. the burn didn&#x27;t happen) so although there&#x27;s no skip (because you keep extrapolating and smoothly transition) but there&#x27;s more error (weird unphysical movements).</li></ul></li><li>Possible idea: when the rail changes out from underneath points note down the sampling error and fix that over a number of frames, possibly with a cap on how much fake velocity it can introduce.</li><li>Ripped out lots of the rail reconciliation stuff<ul><li>It&#x27;s really for handling when sampling and there&#x27;s no rail data, this isn&#x27;t likely to happen any more since synchronous integration was added</li><li>I can do better for fixing the actual exact issue (see idea above)</li></ul></li><li>Implemented the error correction thing, measuring the difference between predicted position and actual position and adding on that offset so there&#x27;s no jerk, then slowly fixing up that error.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="friday-11th">Friday 11th<a href="#friday-11th" class="hash-link" aria-label="Direct link to Friday 11th" title="Direct link to Friday 11th">​</a></h2><ul><li>Fixed docking sim menu camera transitions (<code>cut</code> -&gt; <code>ease in out</code>)</li><li>Controlling error correction based on maximum allowed correction velocity</li><li>Calculating max correction velocity based on distance to nearest visual thing<ul><li>Not actually finding nearest thing yet, just assume it&#x27;s 1m away which is the worst case</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="monday-14th">Monday 14th<a href="#monday-14th" class="hash-link" aria-label="Direct link to Monday 14th" title="Direct link to Monday 14th">​</a></h2><ul><li>Reading about new input system<ul><li><a href="https://docs.unity3d.com/Packages/com.unity.inputsystem@1.0/manual/QuickStartGuide.html" target="_blank" rel="noopener noreferrer">https://docs.unity3d.com/Packages/com.unity.inputsystem@1.0/manual/QuickStartGuide.html</a></li><li><a href="https://gamedevbeginner.com/input-in-unity-made-easy-complete-guide-to-the-new-system/" target="_blank" rel="noopener noreferrer">https://gamedevbeginner.com/input-in-unity-made-easy-complete-guide-to-the-new-system/</a></li></ul></li><li>Setup inputs for docking sim</li><li>Created custom processors to quantize input, this reduces the number of burns that have to be scheduled and cancelled!</li><li>Updated to Unity 2022.3.50f1</li><li>Improved shadow cascades</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tuesday-15th">Tuesday 15th<a href="#tuesday-15th" class="hash-link" aria-label="Direct link to Tuesday 15th" title="Direct link to Tuesday 15th">​</a></h2><ul><li>Testing out <a href="https://assetstore.unity.com/packages/tools/gui/gdtk-ui-pro-289852?aid=1100lJ2J" target="_blank" rel="noopener noreferrer">GDTK: UI Pro</a></li><li>Added system to find proximity between entities with <code>HasVisual</code> and <code>ClosestVisualProximity</code> components. Used to calculate error correction velocity (see Friday 11th)</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="wednesday-16th">Wednesday 16th<a href="#wednesday-16th" class="hash-link" aria-label="Direct link to Wednesday 16th" title="Direct link to Wednesday 16th">​</a></h2><ul><li>Rotating the pod</li><li>Fixing some input bindings</li><li>Experimenting with a new DockingSim main menu, using GDTK</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="thursday-17th">Thursday 17th<a href="#thursday-17th" class="hash-link" aria-label="Direct link to Thursday 17th" title="Direct link to Thursday 17th">​</a></h2><ul><li>Fiddled around some more with GDTK</li><li>Updated project to Unity 6</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="friday-18th">Friday 18th<a href="#friday-18th" class="hash-link" aria-label="Direct link to Friday 18th" title="Direct link to Friday 18th">​</a></h2><ul><li>Experimenting with a new indicator system for docking simulator, inspired by <a href="https://en.wikipedia.org/wiki/Optical_landing_system" target="_blank" rel="noopener noreferrer">OLS</a>.</li><li>Tested prototype docking indicator in place on the ISS</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="monday-21st">Monday 21st<a href="#monday-21st" class="hash-link" aria-label="Direct link to Monday 21st" title="Direct link to Monday 21st">​</a></h2><ul><li>Created circular instead of linear optical docking system</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tuesday-22nd">Tuesday 22nd<a href="#tuesday-22nd" class="hash-link" aria-label="Direct link to Tuesday 22nd" title="Direct link to Tuesday 22nd">​</a></h2><ul><li>Created hexagonal docking ring in blender</li><li>Back and forth working out exactly how to export this to Unity</li><li>Rigged it up with scripts</li><li>Tweaked script for docking lights to pulse when within the docking axis</li><li>Tested in context on ISS</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="wednesday-23rd">Wednesday 23rd<a href="#wednesday-23rd" class="hash-link" aria-label="Direct link to Wednesday 23rd" title="Direct link to Wednesday 23rd">​</a></h2><ul><li>Added new hexagonal lighting system to proper docking sim prefab</li><li>Researched some more about audio assets</li><li>Started designing HUD/UI</li><li>Debugging raycasts</li><li>Added camera shake when thrusters are active</li><li>Started an experimental project for a Myriad driven sound engine</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="thursday-24th">Thursday 24th<a href="#thursday-24th" class="hash-link" aria-label="Direct link to Thursday 24th" title="Direct link to Thursday 24th">​</a></h2><ul><li>Added holographic guidance to station</li><li>Designing HUD</li><li>Added velocity indicator to HUD, this is quite noisy because it&#x27;s just a lerp instead of kinematics</li><li>Implemented kinematic interpolation for velocity too (using the same constant jerk assumption)<ul><li>This has too much noise to show on the UI</li></ul></li><li>Determining velocity from partial derivate of world positions<ul><li>Less noisy, but still has some jitter</li><li>Applied frame-to-frame smoothing which cleans it up</li></ul></li><li>Reduced step size of station and switched back to using the velocity value, it has low enough noise when combined with smoothing</li><li>Investigating modifying settings (audio, rendering, sim etc)<ul><li>URP: <a href="https://docs.unity3d.com/Packages/com.unity.render-pipelines.universal@14.0/manual/quality/quality-settings-through-code.html" target="_blank" rel="noopener noreferrer">https://docs.unity3d.com/Packages/com.unity.render-pipelines.universal@14.0/manual/quality/quality-settings-through-code.html</a></li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="friday-25th">Friday 25th<a href="#friday-25th" class="hash-link" aria-label="Direct link to Friday 25th" title="Direct link to Friday 25th">​</a></h2><ul><li>Fiddled with velocity calculation, experimenting to see if precision can be improved<ul><li>Found nothing interesting, it&#x27;s already good enough</li></ul></li><li>Porting some UI elements from the docking prototype</li><li>Messed around with a singularity in the docking scene<ul><li>Looks cool, totally useless</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="monday-28th">Monday 28th<a href="#monday-28th" class="hash-link" aria-label="Direct link to Monday 28th" title="Direct link to Monday 28th">​</a></h2><ul><li>Started building list of sounds for docking sim<ul><li>Hull creaks</li><li>Thruster start/loop/stop</li><li>Background hum</li><li>Docking capture clunk</li></ul></li><li>Purchased <a href="https://assetstore.unity.com/packages/tools/audio/sonity-audio-middleware-229857" target="_blank" rel="noopener noreferrer">Sonity</a></li><li>Experimented with Sonity, building some test SFX</li><li>Imported Sonity into Ephemeris</li><li>Refactored some docking some menu UI (moving it to FUI framework)</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tuesday-29th">Tuesday 29th<a href="#tuesday-29th" class="hash-link" aria-label="Direct link to Tuesday 29th" title="Direct link to Tuesday 29th">​</a></h2><ul><li>Debugging issues with burn controller<ul><li>Weird jiggling sometimes</li><li>Ignoring some inputs when the inputs change mid burn</li></ul></li><li>Added <a href="https://assetstore.unity.com/packages/tools/utilities/hot-reload-edit-code-without-compiling-254358" target="_blank" rel="noopener noreferrer">Hot Reload</a></li><li>Splitting game logic out from prototype scripts (keyboard controller) and into ECS systems</li><li>Added an enum to Myriad setting how to handle duplicate sets on a new entity (discard the second one, overwrite the first one, throw an exception)</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="wednesday-30th">Wednesday 30th<a href="#wednesday-30th" class="hash-link" aria-label="Direct link to Wednesday 30th" title="Direct link to Wednesday 30th">​</a></h2><ul><li>Updated things to latest version of Myriad</li><li>Updated Myriad+Unity integration to set the entity name from the GameObject name</li><li>Tweak velocity indicator to fix weird drift when turning</li><li>Fuel gauge</li><li>Low fuel warning</li><li>Testing out new assets<ul><li><a href="https://assetstore.unity.com/packages/3d/environments/sci-fi/cw-orbit-modular-backgrounds-233531" target="_blank" rel="noopener noreferrer">CW Orbit</a></li><li><a href="https://assetstore.unity.com/packages/3d/environments/sci-fi/cw-gas-giant-modular-backgrounds-246973" target="_blank" rel="noopener noreferrer">CW Gas Giant</a></li></ul></li><li>Started creating FUI Dropdown box</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="thursday-31st">Thursday 31st<a href="#thursday-31st" class="hash-link" aria-label="Direct link to Thursday 31st" title="Direct link to Thursday 31st">​</a></h2><ul><li>FUI dropdown</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/EphemerisNotes/tags/devlog/">devlog</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/EphemerisNotes/tags/technical-details/">TechnicalDetails</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/EphemerisNotes/tags/docking-sim/">DockingSim</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/EphemerisNotes/tags/orbital-mechanics/">OrbitalMechanics</a></li></ul></div></div><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/martindevans/EphemerisNotes/tree/master/docs/ImplementationDetails/devlog/2024/October.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/EphemerisNotes/ImplementationDetails/devlog/2024/September/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">September</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/EphemerisNotes/ImplementationDetails/devlog/2024/November/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">November</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#tuesday-1st" class="table-of-contents__link toc-highlight">Tuesday 1st</a></li><li><a href="#wednesday-2nd" class="table-of-contents__link toc-highlight">Wednesday 2nd</a></li><li><a href="#thursday-3rd" class="table-of-contents__link toc-highlight">Thursday 3rd</a></li><li><a href="#friday-4th" class="table-of-contents__link toc-highlight">Friday 4th</a></li><li><a href="#saturday-5th" class="table-of-contents__link toc-highlight">Saturday 5th</a></li><li><a href="#monday-7th" class="table-of-contents__link toc-highlight">Monday 7th</a></li><li><a href="#tuesday-8th" class="table-of-contents__link toc-highlight">Tuesday 8th</a></li><li><a href="#wednesday-9th" class="table-of-contents__link toc-highlight">Wednesday 9th</a></li><li><a href="#thursday-10th" class="table-of-contents__link toc-highlight">Thursday 10th</a></li><li><a href="#friday-11th" class="table-of-contents__link toc-highlight">Friday 11th</a></li><li><a href="#monday-14th" class="table-of-contents__link toc-highlight">Monday 14th</a></li><li><a href="#tuesday-15th" class="table-of-contents__link toc-highlight">Tuesday 15th</a></li><li><a href="#wednesday-16th" class="table-of-contents__link toc-highlight">Wednesday 16th</a></li><li><a href="#thursday-17th" class="table-of-contents__link toc-highlight">Thursday 17th</a></li><li><a href="#friday-18th" class="table-of-contents__link toc-highlight">Friday 18th</a></li><li><a href="#monday-21st" class="table-of-contents__link toc-highlight">Monday 21st</a></li><li><a href="#tuesday-22nd" class="table-of-contents__link toc-highlight">Tuesday 22nd</a></li><li><a href="#wednesday-23rd" class="table-of-contents__link toc-highlight">Wednesday 23rd</a></li><li><a href="#thursday-24th" class="table-of-contents__link toc-highlight">Thursday 24th</a></li><li><a href="#friday-25th" class="table-of-contents__link toc-highlight">Friday 25th</a></li><li><a href="#monday-28th" class="table-of-contents__link toc-highlight">Monday 28th</a></li><li><a href="#tuesday-29th" class="table-of-contents__link toc-highlight">Tuesday 29th</a></li><li><a href="#wednesday-30th" class="table-of-contents__link toc-highlight">Wednesday 30th</a></li><li><a href="#thursday-31st" class="table-of-contents__link toc-highlight">Thursday 31st</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/c7VTX5C4tq" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/martindevans" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Contribute</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/martindevans/EphemerisNotes" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://github.com/martindevans/EphemerisNotes/actions/workflows/deploy.yml/badge.svg" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="https://github.com/martindevans/EphemerisNotes/actions/workflows/deploy.yml/badge.svg" alt="Github Status" class="themedImage_ToTc themedImage--light_HNdA footer__logo" width="208" height="20"><img src="https://github.com/martindevans/EphemerisNotes/actions/workflows/deploy.yml/badge.svg" alt="Github Status" class="themedImage_ToTc themedImage--dark_i4oU footer__logo" width="208" height="20"></a></div></div></div></footer></div>
<script src="/EphemerisNotes/assets/js/runtime~main.58e07b7e.js"></script>
<script src="/EphemerisNotes/assets/js/main.30a724ef.js"></script>
</body>
</html>