<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-ImplementationDetails/Rendering/GPULines">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">GPU Line Rendering | Ephemeris Notes</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://martindevans.github.io/EphemerisNotes/ImplementationDetails/Rendering/GPULines/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="GPU Line Rendering | Ephemeris Notes"><meta data-rh="true" name="description" content="Ephemeris needs to draw a lot of lines to show orbital paths. In fact most of the important information in the game is communicated entirely with lines and UI elements!"><meta data-rh="true" property="og:description" content="Ephemeris needs to draw a lot of lines to show orbital paths. In fact most of the important information in the game is communicated entirely with lines and UI elements!"><link data-rh="true" rel="icon" href="/EphemerisNotes/img/rocket_64.png"><link data-rh="true" rel="canonical" href="https://martindevans.github.io/EphemerisNotes/ImplementationDetails/Rendering/GPULines/"><link data-rh="true" rel="alternate" href="https://martindevans.github.io/EphemerisNotes/ImplementationDetails/Rendering/GPULines/" hreflang="en"><link data-rh="true" rel="alternate" href="https://martindevans.github.io/EphemerisNotes/ImplementationDetails/Rendering/GPULines/" hreflang="x-default"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous"><link rel="stylesheet" href="/EphemerisNotes/assets/css/styles.3a08ce8f.css">
<link rel="preload" href="/EphemerisNotes/assets/js/runtime~main.47d7ccb7.js" as="script">
<link rel="preload" href="/EphemerisNotes/assets/js/main.f2283fd5.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(e){}return e}()||function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/EphemerisNotes/"><div class="navbar__logo"><img src="/EphemerisNotes/img/rocket_512.png" alt="Ephemeris Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/EphemerisNotes/img/rocket_512.png" alt="Ephemeris Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Ephemeris</b></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/EphemerisNotes/">Ephemeris</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/EphemerisNotes/category/implementation-details/">Implementation Details</a><button aria-label="Toggle the collapsible sidebar category &#x27;Implementation Details&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/EphemerisNotes/ImplementationDetails/Fonts/">Fonts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/EphemerisNotes/ImplementationDetails/Marketing/">Marketing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/EphemerisNotes/ImplementationDetails/Modding/">Modding</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/EphemerisNotes/ImplementationDetails/Multiplayer/Frameworks/">Multiplayer</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/EphemerisNotes/ImplementationDetails/Physics/Integration/">Physics</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/EphemerisNotes/ImplementationDetails/Planning/">Planning</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/EphemerisNotes/ImplementationDetails/PrecisionScale/">Precision &amp; Scale</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/EphemerisNotes/ImplementationDetails/ProceduralGeneration/EditorProceduralGeneration/">ProceduralGeneration</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/EphemerisNotes/ImplementationDetails/Rendering/CPULines/">Rendering</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/EphemerisNotes/ImplementationDetails/Rendering/CPULines/">CPU Line Rendering</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/EphemerisNotes/ImplementationDetails/Rendering/CarmackStarRendering/">CarmackStarRendering</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/EphemerisNotes/ImplementationDetails/Rendering/GPUBezierCurves/">GPU Bezier Curves</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/EphemerisNotes/ImplementationDetails/Rendering/GPULines/">GPU Line Rendering</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/EphemerisNotes/ImplementationDetails/Rendering/LineGridRendering/">Line Grid Rendering</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/EphemerisNotes/ImplementationDetails/Rendering/SceneScaleTricks/">Scene Scale Tricks</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/EphemerisNotes/ImplementationDetails/UnityPlugins/">UnityPlugins</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/EphemerisNotes/ImplementationDetails/devlog/June/">devlog</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/EphemerisNotes/category/media/">Media</a><button aria-label="Toggle the collapsible sidebar category &#x27;Media&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/EphemerisNotes/category/web-pages/">Web Pages</a><button aria-label="Toggle the collapsible sidebar category &#x27;Web Pages&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/EphemerisNotes/Rocketry/LaunchVehicles/">Rocketry</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/EphemerisNotes/Setting/">Setting</a><button aria-label="Toggle the collapsible sidebar category &#x27;Setting&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/EphemerisNotes/SolarSystem/Jupiter/Images/">SolarSystem</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/EphemerisNotes/StarCatalogue/">StarCatalogue</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/EphemerisNotes/Weapons/Real/Atomic Weapons/">Weapons</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/EphemerisNotes/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/EphemerisNotes/category/implementation-details/"><span itemprop="name">Implementation Details</span></a><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Rendering</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">GPU Line Rendering</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>GPU Line Rendering</h1></header><p>Ephemeris needs to draw a lot of lines to show orbital paths. In fact most of the important information in the game is communicated entirely with lines and UI elements!</p><p>Orbital paths have several requirements:</p><ul><li>They have a <strong>lot</strong> of points (e.g. 2+ weeks of orbital movement)</li><li>Position data between points should be interpolated non-linearly (specially when zooming in)</li><li>Scale of positions is literally astronomical (double precision may be required).<ul><li>The line may even go beyond the camera far plane and should still be visible!</li></ul></li><li>Extra information should be able to be shown (e.g. engine burn start/end times).</li><li>UI elements (e.g. markers of special events) should be able to &quot;interact&quot; visually with lines.</li><li>Line should be constant screen size so that it is visible at vast distances.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-goal">The Goal<a href="#the-goal" class="hash-link" aria-label="Direct link to The Goal" title="Direct link to The Goal">​</a></h2><p>Here is an example image, showing everything required.</p><ul><li>Note the border around the marker sphere where the line disappears.</li><li>Red sections indicate engine burns, these should be pixel perfect.</li><li>Everything in this image could be beyond the camera far plane!</li></ul><p><img loading="lazy" src="/EphemerisNotes/assets/images/Unity_2023-03-17_16-56-31-500cefa8f90128d2876b7f56a904a42f.png" width="925" height="642" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="research">Research<a href="#research" class="hash-link" aria-label="Direct link to Research" title="Direct link to Research">​</a></h2><p>While working on line rendering I came across several other approaches for rendering lines. Here&#x27;s an unordered list:</p><ul><li><a href="https://docs.unity3d.com/Manual/class-LineRenderer.html" target="_blank" rel="noopener noreferrer">Unity LineRenderer</a><ul><li>Does not handle huge scale</li><li>Cannot render with constant screen width</li></ul></li><li><a href="https://github.com/johannesugb/VolumetricLinesUnity" target="_blank" rel="noopener noreferrer">Volumetric Lines - Unity Asset</a><ul><li>Make sure to use the <code>universal_render_pipeline</code> branch!</li><li>Uses shader tricks to render the line, maybe be useful down later with other line rendering techniques<ul><li><a href="https://web.archive.org/web/20150930205745/http://sebastien.hillaire.free.fr/index.php?option=com_content&amp;view=article&amp;id=54&amp;Itemid=56" target="_blank" rel="noopener noreferrer">https://web.archive.org/web/20150930205745/http://sebastien.hillaire.free.fr/index.php?option=com_content&amp;view=article&amp;id=54&amp;Itemid=56</a></li><li><a href="https://web.archive.org/web/20111202022753/http://sebastien.hillaire.free.fr/index.php?option=com_content&amp;view=article&amp;id=57&amp;Itemid=74" target="_blank" rel="noopener noreferrer">https://web.archive.org/web/20111202022753/http://sebastien.hillaire.free.fr/index.php?option=com_content&amp;view=article&amp;id=57&amp;Itemid=74</a></li></ul></li></ul></li><li><a href="https://assetstore.unity.com/packages/tools/particles-effects/shapes-173167" target="_blank" rel="noopener noreferrer">Shapes Asset</a><ul><li>Great asset, highly recommended!</li><li>Does not handle huge scale.</li><li>Recomputing line mesh when position changes seems to be expensive (not jobified).</li><li><code>ShapesMeshGen.GenPolylineMesh</code> helper generates mesh, potentially this could be used directly to generate the mesh from inside a parallel <code>Task</code>.</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="approach-1-pure-gpu">Approach 1: Pure GPU<a href="#approach-1-pure-gpu" class="hash-link" aria-label="Direct link to Approach 1: Pure GPU" title="Direct link to Approach 1: Pure GPU">​</a></h2><p>My first approach to solving this problem was intended as a &quot;pure GPU&quot; solution:</p><ol><li>Dump the orbital position data straight from the sim into a <code>ComputeBuffer</code><ol><li>It&#x27;s not always as simple as just taking the entire sim data! See <a href="/EphemerisNotes/ImplementationDetails/Rendering/CPULines/">Part 2</a> for detail.</li></ol></li><li>Run a compute shader to create vertices along the line - adding extra vertices to interpolate the data.</li><li>Draw line-strip vertices</li><li>In geometry shader, emit new vertices to make the line wider (constant screen size).</li></ol><p>This approach has a few problems. First of all, I&#x27;m not very familiar with compute shaders, and while I am learning more about using them for Ephemeris this would be tricky to implement (for me). Secondly, and maybe more importantly, geometry shaders are slow:</p><ul><li><a href="https://gamedev.stackexchange.com/questions/187584/has-the-geometry-shader-been-abandonded" target="_blank" rel="noopener noreferrer">https://gamedev.stackexchange.com/questions/187584/has-the-geometry-shader-been-abandonded</a></li><li><a href="http://www.joshbarczak.com/blog/?p=667" target="_blank" rel="noopener noreferrer">http://www.joshbarczak.com/blog/?p=667</a></li></ul><p>Maybe they&#x27;re not slow enough to be a problem, but I don&#x27;t want to put in all the effort to implement this approach only to discover it&#x27;s not fast enough to actually use!</p><p>While researching this technique, I researched some geometry shader related things:</p><ul><li><a href="https://medium.com/chenjd-xyz/using-the-geometry-shader-in-unity-to-generate-countless-of-grass-on-gpu-4ca6d78b3de6" target="_blank" rel="noopener noreferrer">Geometry shader grass</a></li><li><a href="https://gamedevbill.com/unity-vertex-shader-and-geometry-shader-tutorial/" target="_blank" rel="noopener noreferrer">General geometry shader tutorial</a></li><li><a href="https://forum.unity.com/threads/geometry-shader-with-meshtopology-linestrip.684643/" target="_blank" rel="noopener noreferrer">LineStrip+GeometryShader</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="approach-2-no-gpu-compute">Approach 2: No GPU Compute<a href="#approach-2-no-gpu-compute" class="hash-link" aria-label="Direct link to Approach 2: No GPU Compute" title="Direct link to Approach 2: No GPU Compute">​</a></h2><p>The problems with the previous approach were compute shaders (i&#x27;m not very familiar with them) and geometry shaders (should be avoided because they&#x27;re slow). My second approach tries to solve both of these problems.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="mesh-generation">Mesh Generation<a href="#mesh-generation" class="hash-link" aria-label="Direct link to Mesh Generation" title="Direct link to Mesh Generation">​</a></h4><p>The first step happens in the editor - procedurally generating lines with fixed numbers of vertices and storing these as assets. The lines are tubes, with 4 vertices around each point, this will be used later to give the line constant on screen size. My approach to procedurally generating the lines is to use a <a href="https://docs.unity3d.com/Manual/ScriptedImporters.html" target="_blank" rel="noopener noreferrer"><code>ScriptedImporter</code></a>. Procedural generation parameters are stored in a file with a unique file extension (<code>.procline</code>) and then a scripted importer can pickup that file and run the generation in-editor. See more details <a href="/EphemerisNotes/ImplementationDetails/ProceduralGeneration/EditorProceduralGeneration/">here</a>.</p><p>The second step is to copy the orbital data into a <code>ComputeBuffer</code>. The position data in the physics engine is in &quot;world&quot; space (1unit = 1m) relies on double precision to handle the vast distances involved. In Ephemeris this will be remapped into a smaller scale before rendering. Another <code>ComputeBuffer</code> is passed in with the start/end time of every engine burn (in order).</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="data-preparation">Data Preparation<a href="#data-preparation" class="hash-link" aria-label="Direct link to Data Preparation" title="Direct link to Data Preparation">​</a></h4><p>A <code>ComputeBuffer</code> cannot be updated off the main thread, so a <code>Job</code> is used to prepare the data and the main thread copies it just before rendering:</p><div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Copy into buffers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">burnDataBuffer?.Release();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">burnDataBuffer = new ComputeBuffer(burns.Length, EngineBurnData.Size);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">burnDataBuffer.SetData(burns);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">positionDataBuffer?.Release();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">positionDataBuffer = new ComputeBuffer(positions.Length, StructurePointData.Size);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">positionDataBuffer.SetData(positions);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Update material</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Material.SetBuffer(&quot;_EngineBurns&quot;, burnDataBuffer);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Material.SetInt(&quot;_EngineBurnsCount&quot;, burns.Length);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Material.SetBuffer(&quot;_LinePositionData&quot;, positionDataBuffer);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Free arrays</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">positions.Dispose();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">burns.Dispose();</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Before rendering an &quot;arguments&quot; buffer is needed to tell rendering what to do:</p><div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">argsBuffer?.Dispose();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">argsBuffer = new ComputeBuffer(5, sizeof(uint), ComputeBufferType.IndirectArguments, ComputeBufferMode.SubUpdates);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var args = new NativeArray&lt;uint&gt;(5, Allocator.Temp);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">args[0] = (uint)Math.Min(PointCount * 4, _renderMesh.vertexCount);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">args[1] = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">args[2] = _renderMesh.GetIndexStart(0);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">args[3] = _renderMesh.GetBaseVertex(0);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">argsBuffer.SetData(args);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The args buffer values at each index (<a href="https://docs.unity3d.com/ScriptReference/Graphics.DrawMeshInstancedIndirect.html" target="_blank" rel="noopener noreferrer">docs</a>) is:
0. index count per instance</p><ol><li>instance count</li><li>start index location</li><li>base vertex location</li><li>start instance location.</li></ol><p>Finally in <code>Update</code> we can dispatch the rendering using <a href="https://docs.unity3d.com/ScriptReference/Graphics.DrawMeshInstancedIndirect.html" target="_blank" rel="noopener noreferrer"><code>DrawMeshInstancedIndirect</code></a>:</p><div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Graphics.DrawMeshInstancedIndirect(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _mesh,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    submeshIndex: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Material,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bounds,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    argsBuffer,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    layer: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="vertex-shader">Vertex Shader<a href="#vertex-shader" class="hash-link" aria-label="Direct link to Vertex Shader" title="Direct link to Vertex Shader">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="positions">Positions<a href="#positions" class="hash-link" aria-label="Direct link to Positions" title="Direct link to Positions">​</a></h4><p>We&#x27;re done with the CPU side of things, what does the GPU side look like? In the shader a compute buffer is declared with the same data layout as the CPU side:</p><div class="language-clike codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-clike codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">struct LinePointProperties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    float timestamp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    float3 position</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">StructuredBuffer</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">LinePointProperties</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> _LinePositionData</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The vertex shader needs to do three main things:</p><ul><li>Sample position data</li><li>Clamp to far-plane</li><li>Push vertices around to constant screen width</li></ul><p>It also needs to prepare some data for the pixel shader:</p><ul><li>timestamp (for pixel-perfect cutoff)</li><li>burn time (for pixel perfect burn info)</li></ul><p>Let&#x27;s break this down. First off sampling the data. Each vertex has an attribute which describes which data point it should sample. The XY position of the vertex is used as an offset from the data point:</p><div class="language-clike codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-clike codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Sample data at index</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LinePointProperties data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> _LinePositionData</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">v</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">index</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">float timestamp </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">timestamp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">float3 pivot </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">position</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Read offset for this vertex from the mesh</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">float3 offset </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">float3</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">v</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">vertex</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> v</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">vertex</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">y</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> _ThicknessPx</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now that we have the &quot;world position&quot; of the point (data.pivot), it&#x27;s clamped to the farplane and transformed into clip space:</p><div class="language-clike codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-clike codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Clamp to far plane</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">float3 pivotPos </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">clamp_farplane</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pivot</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Transform pivot into screenspace</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">float4 pivotScreen </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">UnityWorldToClipPos</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pivotPos</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now we want to apply the offset, correcting for screensize, to get a constant on-screen width. This is derived from <a href="https://mattdesl.svbtle.com/drawing-lines-is-hard" target="_blank" rel="noopener noreferrer">this blog post</a> about line drawing.</p><div class="language-clike codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-clike codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Write out result</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">v2f o</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">vertex </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> pivotScreen </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">float4</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">offset </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> _ScreenParams</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">y </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> pivotScreen</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">w</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">timestamp </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> timestamp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> o</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>clamp_farplane</code> method used above is fairly simple and could be used for many other things that need to render at infinite distance:</p><div class="language-clike codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-clike codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">float3 </span><span class="token function" style="color:#d73a49">clamp_farplane</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">float3 positionWS</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    float offset </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">min</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_FarPlaneOffset</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> _ProjectionParams</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">z </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Get distance from the camera.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    float3 cameraToPositionWS </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> positionWS </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> _WorldSpaceCameraPos</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    float distanceToCamera </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">length</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cameraToPositionWS</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    float distancePastFarPlane </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">distanceToCamera </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> offset</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> _ProjectionParams</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">z</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// If our vertex is within the far plane just return it.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">distancePastFarPlane </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">f</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> positionWS</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Move it to just inside the far plane</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    float correctedDistance </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> _ProjectionParams</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">z </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> offset</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    float3 dirCameraToPosition </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> cameraToPositionWS </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> distanceToCamera</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> _WorldSpaceCameraPos </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dirCameraToPosition </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> correctedDistance</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="burn-data">Burn Data<a href="#burn-data" class="hash-link" aria-label="Direct link to Burn Data" title="Direct link to Burn Data">​</a></h4><p>The vertex data also needs to prepare data about engine burns for the pixel shader. This allows the pixel shader to determine is a particular pixel is in a burn or not and to do pixel-perfect highlighting of burn start/end.</p><p>Since there will be a small number of burns the vertex shader simply does a linear search for a burn which starts before the timestamp and ends after it. A vertex emits a <code>1</code> into a field if it&#x27;s within a burn and <code>-1</code> otherwise.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pixel-shader">Pixel Shader<a href="#pixel-shader" class="hash-link" aria-label="Direct link to Pixel Shader" title="Direct link to Pixel Shader">​</a></h3><p>The pixel shader is fairly simple:</p><div class="language-clike codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-clike codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">float4 </span><span class="token function" style="color:#d73a49">frag</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">v2f i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> SV_Target</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Clip out (i.e. don&#x27;t render) pixels before &quot;now&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    float t </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">timestamp </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> _Time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">y</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">clip</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">t</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Choose colour based on &quot;burn&quot; field</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    float4 col </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">float4</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">burn </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.99</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        col</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">rgb </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> _BurnColor</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        col</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">rgb </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> _MainColor</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> col</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Remember that the &quot;burn&quot; and &quot;timestamp&quot; data will be <em>interpolated</em> between vertices. This means each pixel has a perfect measure of the time it is at, so we can clip out pixels that occur before now. Burn data is not quite perfect if there is a burn between two vertices, but this should never occur because the acceleration involved means that the orbit line will curve more at that point which naturally leads to more vertices.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="bonus-round-stencils">Bonus Round: Stencils<a href="#bonus-round-stencils" class="hash-link" aria-label="Direct link to Bonus Round: Stencils" title="Direct link to Bonus Round: Stencils">​</a></h2><p>Back at the start of the article I showed this image as the final goal:
<img loading="lazy" src="/EphemerisNotes/assets/images/Unity_2023-03-17_16-56-31-500cefa8f90128d2876b7f56a904a42f.png" width="925" height="642" class="img_ev3q"></p><p>There&#x27;s one aspect of this we haven&#x27;t addressed yet; around the &quot;marker&quot; (some kind of UI element marking a significant thing) the line is cut out. This isn&#x27;t critically important, but it is nice to have.</p><p>This is achieved using the <a href="https://docs.unity3d.com/Manual/SL-Stencil.html" target="_blank" rel="noopener noreferrer">stencil buffer</a>. The stencil buffer is an 8-bit buffer which is checked for every pixel, the pixel is only rendered if it passes the stencil check, it can be used to cutout pixels or to mark an area for rendering later.</p><p>As you can see here the marker sphere is surrounded by a larger sphere which is preventing the orbit line from being rendered:
<img loading="lazy" src="/EphemerisNotes/assets/images/Unity_2023-03-19_15-18-40-54573c36b08b69be3054ed872b7465d0.png" width="835" height="604" class="img_ev3q"></p><p>This is the shader for that outer sphere:</p><div class="language-clike codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-clike codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Shader </span><span class="token string" style="color:#e3116c">&quot;Custom/DrawStencilOnly&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SubShader</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Tags </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Queue&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Geometry-1&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ColorMask </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ZWrite Off</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Stencil </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Ref </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Pass Replace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Pass </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note that there is no HLSL here! Everything is done in the <a href="https://docs.unity3d.com/Manual/SL-Reference.html" target="_blank" rel="noopener noreferrer">ShaderLab</a> configuration.</p><p>Setting the <code>&quot;Queue&quot;</code> to <code>&quot;Geometry-1&quot;</code> causes this object to be rendered immediately before the normal geometry queue. This is important because we need the stencil buffer populated before the otehr geometry (including the orbit line) tries to read it.</p><p>Setting the <code>ColorMask 0</code> means that no colour channels will be written by this shader, which means the sphere will be completely invisible.</p><p>Settings <code>ZWrite Off</code> means that the larger sphere does not occlude things which are further away (if it did that the marker sphere would be invisible).</p><p>The <code>Stencil</code> block configures the stencil to write the reference value (<code>1</code>) into the stencil buffer wherever the stencil check passes for this shader. The default is pass <code>Always</code>, so this will write 1 everywhere that the shader covers.</p><p>Once all of this in place all that is needed it so add this to the orbit line shader:</p><div class="language-clike codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-clike codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Stencil </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Ref </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Comp Greater</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This means that the orbit line is rendered where the reference value (<code>1</code>) is <code>greater</code> than the stencil buffer value. The stencil is 0 everywhere, except where markers have set it to 1.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/EphemerisNotes/tags/technical-details/">TechnicalDetails</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/EphemerisNotes/tags/rendering/">Rendering</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/EphemerisNotes/tags/gpu/">GPU</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/EphemerisNotes/tags/shaders/">Shaders</a></li></ul></div></div><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/martindevans/EphemerisNotes/tree/master/docs/ImplementationDetails/Rendering/GPULines.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/EphemerisNotes/ImplementationDetails/Rendering/GPUBezierCurves/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">GPU Bezier Curves</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/EphemerisNotes/ImplementationDetails/Rendering/LineGridRendering/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Line Grid Rendering</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#the-goal" class="table-of-contents__link toc-highlight">The Goal</a></li><li><a href="#research" class="table-of-contents__link toc-highlight">Research</a></li><li><a href="#approach-1-pure-gpu" class="table-of-contents__link toc-highlight">Approach 1: Pure GPU</a></li><li><a href="#approach-2-no-gpu-compute" class="table-of-contents__link toc-highlight">Approach 2: No GPU Compute</a><ul><li><a href="#vertex-shader" class="table-of-contents__link toc-highlight">Vertex Shader</a></li><li><a href="#pixel-shader" class="table-of-contents__link toc-highlight">Pixel Shader</a></li></ul></li><li><a href="#bonus-round-stencils" class="table-of-contents__link toc-highlight">Bonus Round: Stencils</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/c7VTX5C4tq" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/martindevans" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Contribute</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/martindevans/EphemerisNotes" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://github.com/martindevans/EphemerisNotes/actions/workflows/deploy.yml/badge.svg" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="https://github.com/martindevans/EphemerisNotes/actions/workflows/deploy.yml/badge.svg" alt="Github Status" class="themedImage_ToTc themedImage--light_HNdA footer__logo" width="208" height="20"><img src="https://github.com/martindevans/EphemerisNotes/actions/workflows/deploy.yml/badge.svg" alt="Github Status" class="themedImage_ToTc themedImage--dark_i4oU footer__logo" width="208" height="20"></a></div></div></div></footer></div>
<script src="/EphemerisNotes/assets/js/runtime~main.47d7ccb7.js"></script>
<script src="/EphemerisNotes/assets/js/main.f2283fd5.js"></script>
</body>
</html>